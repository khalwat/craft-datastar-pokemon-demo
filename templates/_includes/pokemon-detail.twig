{# @var pokemon \craft\elements\Entry #}

{% import "_includes/macros.twig" as macros %}

{% set imgUrl = macros.pokemonImageFromId(pokemon.pokemonId) | spaceless %}
{% set backgroundColor = macros.colorFromType(pokemon.type1) | spaceless %}
<section id="pokemon-detail" class="flex flex-row items-center place-content-center my-4">
    <div class="flex-shrink">
        <h3 class="m-3 text-3xl text-center"><a href="/">&larr; back &nbsp;</a></h3>
    </div>
    <div class="flex-shrink mr-36">
        <div class="card bg-base-100 w-96 shadow-xl rounded-lg overflow-hidden m-2">
            <div class="{{ macros.pokemonGradientClasses(backgroundColor) }}">
                <figure class="p-10">
                    <img
                        src="{{ imgUrl }}"
                        alt="{{ pokemon.pokemonName }}"/>
                </figure>
            </div>
            <div class="card-body {{ macros.cardGradientClasses() }}">
                {# The display card #}
                <div class="space-y-2">
                    <table class="table table-fixed pr-1">
                        <tbody>
                        <tr class="text-lg">
                            <td class="text-right text-gray-500 w-1/3 pr-0">Name:</td>
                            <td class="w-2/3">{{ pokemon.pokemonName }}</td>
                        </tr>
                        <tr class="text-lg">
                            <td class="text-right text-gray-500 w-1/3 pr-0">Type:</td>
                            <td class="w-2/3">{{ pokemon.type1 }}</td>
                        </tr>
                        <tr class="text-lg">
                            <td class="text-right text-gray-500 w-1/3 pr-0">Generation:</td>
                            <td class="w-2/3">{{ pokemon.generation }}</td>
                        </tr>
                        </tbody>
                    </table>
                    {% set section = craft.app.entries.sectionByHandle('pokemon') %}
                    {% if currentUser and currentUser.can('saveEntries:' ~ section.uid) %}
                        <div class="card-actions justify-end">
                            <button class="btn btn-primary"
                                    data-on-click="{{ datastar.get('_datastar/pokemon-detail-edit.twig', { pokemonId: pokemon.id }) }}"
                            >
                                Edit
                            </button>
                        </div>
                    {% endif %}
                </div>
                <div class="toast toast-bottom toast-end mb-12">
                    <div id="alert"></div>
                </div>
            </div>
        </div>
    </div>
</section>
